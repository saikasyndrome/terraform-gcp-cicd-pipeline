steps:
  - id: 'Terraform Format Check'
    name: 'hashicorp/terraform:1.9.2'
    args: ['fmt', '-check', '-diff']
    dir: 'terraform'

  - id: 'Terraform Init'
    name: 'hashicorp/terraform:1.9.2'
    args: ['init']
    dir: 'terraform'

  - id: 'Terraform Plan Dev'
    name: 'hashicorp/terraform:1.9.2'
    env:
      - 'TF_WORKSPACE=dev'
    args: ['plan']
    dir: 'terraform'
    
  - id: 'Terraform Plan Prd'
    name: 'hashicorp/terraform:1.9.2'
    env:
      - 'TF_WORKSPACE=prd'
    args: ['plan']
    dir: 'terraform'

options:
  logging: CLOUD_LOGGING_ONLY
